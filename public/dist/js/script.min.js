function doYouSee(a) {
    var b = $(a).position().top, c = $(window).scrollTop();
    return b > c && b < c + $(window).height();
}

function headerFade() {
    $("#homepage-header:not(:visible)");
}

$(document).ready(function() {
    if ($(".quoter").click(function(a) {
        a.preventDefault();
        var b = $(this).data("target");
        $(".quote").removeClass("show").addClass("hidden"), $(b).removeClass("hidden").addClass("show"), 
        $(".quoter").removeClass("active"), $(this).addClass("active");
        var c = $(".quoter.active").offset(), d = c.left + $(".quoter.active").width() / 2 - $(".pointer ~ .point").width() / 2 - 10;
        $(".pointer ~ .point").offset({
            left: d
        });
    }), $("#slide-sidebar").css({
        "min-height": $("#slide-content").outerHeight() + 50
    }), $("#slide-page").length > 0 && $(window).click(function(a) {
        var b = a.target;
        window.onbeforeunload = function(a) {
            if (a = a || window.event, (a.pageY || a.clientY) < 0 || 0 == $(b).parents("#slide-page").length && 0 == $(b).parents("#projects-page").length && 0 == $(b).parents("#loginForm").length) return "Leaving now will result in loosing any unsaved progress.";
        };
    }), $(".step ul li a").each(function() {
        $(this).height() > 30 && $(this).addClass("taller");
    }), $('input[name="extra"]').length > 0 && "no" == $('input[name="extra"]').val() && $(".picks").addClass("hide"), 
    $(".picker").click(function(a) {
        a.preventDefault(), $(".picks, .13-buttons").addClass("hide"), $($(this).data("target")).removeClass("hide"), 
        $('input[name="extra"]').val($(this).data("target"));
    }), $(".welcome").modal("show"), $(".register-from-modal").click(function() {
        $(".welcome").modal("hide");
    }), $(".choice").click(function() {
        $(".choice-text").hide(), $("#" + $(this).attr("id") + "-text").show("fast");
    }), $('textarea[name="answer"]').length > 1 && $('textarea[name="answer"]').each(function(a) {
        $(this).attr("name", "answer[" + a + "]");
    }), $("#preselected").length > 0) {
        var a = $("#preselected").val().split(";");
        for ($(".answer-wrapper").addClass("hide"), i = 0; i <= a.length; i++) {
            var b = a[i];
            1 == b || 4 == b ? $(".answer-1").removeClass("hide").addClass("show") : 5 == b || 6 == b ? $(".answer-4").removeClass("hide").addClass("show") : 2 == b ? $(".answer-2").removeClass("hide").addClass("show") : 3 == b && $(".answer-3").removeClass("hide").addClass("show");
        }
    }
    $(".project-deleter").click(function() {
        var a = $(this), b = a.next("a");
        if (confirm("Are you sure? This will delete all the answers and documents associated with this project permanently.")) {
            var c = $(this).data("delete");
            $.post("/ajax/delete_project", {
                project: c
            }, function(c) {
                200 == c.code && (b.remove(), a.remove());
            }, "json");
        }
    }), $(".ajx.project-name").submit(function(a) {
        a.preventDefault();
        var b = $(this), c = {
            project: $(this).children("#project").val(),
            title: $(this).children().children("#title").val()
        };
        return $.getJSON($(this).attr("action"), c, function(a) {
            "danger" === a.code ? b.prepend(a.message) : (b.parent("div").append("<h4>" + a.message + "</h4>"), 
            b.remove());
        }), !1;
    }), $("#projects-page").click(function(a) {
        a.preventDefault();
        var b = $("form#mainForm").serialize(), c = $(this).attr("href");
        $.post("/ajax/continuity", b, function(a) {
            window.location.href = c;
        }, "json");
    }), $(".saveAnswer").submit(function(a) {
        a.preventDefault();
        var b = {
            slide: null,
            answer: []
        };
        b.slide = $(this).find("#slide").val(), $(".answer").length > 0 ? $(".answer").each(function(a) {
            b.answer[a] = $(this).val();
        }) : b.answer = $(this).find("#answer").val(), $.post("/ajax/save_answer", b, function(a) {
            if ("success" === a.code) if ($(".editPrevAnswer").modal("toggle"), "object" == typeof b.answer) {
                var c = "<ul>";
                b.answer.forEach(function(a) {
                    c = c + "<li>" + a + "</li>";
                }), c += "</ul>", $("#answerBox").html(c);
            } else $("#answerBox").html(b.answer); else $(".editAnswer .modal-body").prepend('<div class="alert alert-danger"><i class="fa fa-times"></i> ' + a.message + "</div>");
        }, "json");
    }), $("#slide-sidebar a").click(function(a) {
        a.preventDefault();
        var b = $("form").serialize(), c = $(this).attr("href").split("/"), d = {
            nextSlide: c[3],
            hash: c[4]
        }, e = "/project/slide/" + d.nextSlide + "/" + d.hash;
        $.post("/project/slide/" + d.nextSlide, b, function(a) {
            window.location.href = e;
        });
    }), $("#editProfile").click(function(a) {
        a.preventDefault(), $("#editProfileForm alert").remove();
        var b = $("#editProfileForm").serialize();
        $.post("/ajax/edit_profile", b, function(a) {
            if ("success" == a.code) {
                var b = $("#editProfileForm").parent();
                $("#editProfileForm").remove(), $(b).append('<div class="alert alert-success">' + a.message + " <strong>Applying new user credentials...</strong></div>"), 
                setTimeout(function() {
                    $("#user-forms").modal("hide");
                }, 1950), setTimeout(function() {
                    location.reload();
                }, 2e3);
            } else $("#editProfile").before('<div class="alert alert-danger">' + a.message + "</div>");
        }, "json");
    }), $("#login").click(function(a) {
        a.preventDefault(), $("#loginForm alert").remove();
        var b = $("#loginForm").serialize();
        $.post("/ajax/login", b, function(a) {
            if ("success" == a.code) {
                var b = $("#loginForm").parent();
                $("#loginForm").remove(), $(b).append('<div class="alert alert-success">' + a.message + "<strong>Reloading credentials...</strong></div>"), 
                setTimeout(function() {
                    $("#user-forms").modal("hide");
                }, 1950), setTimeout(function() {
                    location.href = "/user/projects";
                }, 2e3);
            } else $("#login").before('<div class="alert alert-danger">' + a.message + "</div>");
        }, "json");
    }), $(".prev-slide-loader").click(function(a) {
        a.preventDefault(), $(".prev-slide-loader").next().empty();
        var b = $(".prev-slide-loader").next();
        return $.getJSON("/ajax/getprojectslide", {
            project: $(this).data("project"),
            slide: $(this).data("slide")
        }, function(a) {
            "danger" == a.code ? b.append("No data found.") : b.append('<div class="tsa-tooltip-wrap"><p>' + a.answer + " " + a.choice + "</p><p><em>" + a.extra + "</em></p></div>");
        }), !1;
    }), $("#extra15-2").click(function() {
        $(this).is(":checked") ? $(".checkboxcheck").show() : $(".checkboxcheck").hide();
    }), $("#save-form").click(function(a) {
        var b = $($(this).data("form")), c = {
            title: b.children().children("#title").val(),
            description: $(".textarea").summernote("code"),
            step: $("#step").val(),
            id: b.children("#id").val(),
            position: b.children().children("#position").val(),
            slide_type: $("#slide_type").val()
        };
        return $.post("/ajax/save_slide", c, function(a) {
            a.created ? window.location.href = "/manage/slide/" + a.created : b.prepend('<div class="alert alert-' + a.code + '"><i class="fa fa-' + a.icon + '"></i> ' + a.message + "</div>");
        }, "json"), a.preventDefault(), !1;
    }), $("#save-page-form").click(function(a) {
        var b = $($(this).data("form")), c = {
            title: b.children().children("#title").val(),
            contents: $(".textarea").summernote("code"),
            url: b.children().children("#url").val(),
            id: b.find("#page").val()
        };
        return $.post("/ajax/save_page", c, function(a) {
            a.created ? window.location.href = "/manage/page/" + a.created : b.prepend('<div class="alert alert-' + a.code + '"><i class="fa fa-' + a.icon + '"></i> ' + a.message + "</div>");
        }, "json"), a.preventDefault(), !1;
    }), $(".textarea").length > 0 && $(".textarea").summernote(), $(".toc").affix({
        offset: {
            top: 100,
            bottom: function() {
                return this.bottom = $("footer").outerHeight(!0);
            }
        }
    }), $("#manage-slide-list * .expander-link").click(function() {
        return $(this).closest("h3").next().removeClass("hidden").show(), !1;
    }), $(".deleteslide").click(function(a) {
        confirm("Are you sure you want to delete this slide?") || a.preventDefault();
    }), $(".deletestep").click(function(a) {
        confirm("Are you sure you want to delete this step?") || a.preventDefault();
    }), window.location.hash && $(window.location.hash).hasClass("tab-link") && $(window.location.hash).tab("show"), 
    $(document).on("click", ".custom-form .fieldcontainer legend", function() {
        $(this).next().slideToggle();
    }), $(document).on("keypress", ".alpaca-field-text .alpaca-control", function(a) {
        13 != a.which && 10 != a.which || a.preventDefault();
    }), $("aside .box").each(function(a, b) {
        pos = $("a[name=" + $(b).attr("id") + "]").position(), $("aside").height(pos.top + 250), 
        $(b).css("position", "relative"), $(b).css("top", pos.top);
    }), $(".customform-23-select").on("change", function(a, b) {
        "consent" == $(this).val() && (alert($(this).val()), $("#consentform").show(), $("#consentform").removeClass("hide"));
    });
});

var homepage = function() {
    "use strict";
    var a = {
        selectors: {
            header: "#homepage-header",
            logo: ".logo",
            spyglass: ".spyglass",
            paper1: "#paper-1",
            paper2: "#paper-2",
            paper3: "#paper-3",
            appIconMsg: "#app-icon-msg",
            appIconMap: "#app-icon-map",
            appIconDbm: "#app-icon-dbm",
            checkrows1: "#paper-1 .checkrow",
            checkrows2: "#paper-2 .checkrow",
            checkrows3: "#paper-3 .checkrow",
            paperContent: ".paper-contents",
            textStep1: ".text-step-1",
            textStep2: ".text-step-2",
            textStep3: ".text-step-3"
        }
    }, b = {
        timelines: {
            index: 0,
            nextIndex: 0,
            direction: "still",
            header: new TimelineMax().to(a.selectors.header, .5, {
                opacity: 1
            }).pause(),
            steps: new TimelineMax().to(a.selectors.textStep1, .2, {
                ease: Power1.easeIn,
                opacity: 1
            }).to(a.selectors.textStep2, .2, {
                ease: Power1.easeIn,
                opacity: 1
            }).to(a.selectors.textStep3, .2, {
                ease: Power1.easeIn,
                opacity: 1
            }).pause(),
            checkrows: new TimelineMax().to(a.selectors.checkrows1, .2, {
                ease: Power1.easeIn,
                opacity: 1,
                x: 0
            }).to(a.selectors.checkrows2, .2, {
                ease: Power1.easeIn,
                opacity: 1,
                x: 0
            }).to(a.selectors.checkrows3, .2, {
                ease: Power1.easeIn,
                opacity: 1,
                x: 0
            }).pause(),
            paper: new TimelineMax().to(a.selectors.paperContent, .5, {
                ease: Power1.easeOut,
                opacity: 1,
                x: 0,
                y: 5
            }).pause(),
            main: new TimelineMax().to(a.selectors.logo, .5, {
                opacity: 0
            }, "slide3").to(a.selectors.spyglass, .5, {
                opacity: 1
            }, "slide3").to(a.selectors.paper1, .5, {
                opacity: 1,
                x: 0,
                y: -160
            }, "slide3").to(a.selectors.appIconMap, .5, {
                x: -80,
                y: 240
            }, "slide3").to(a.selectors.paper2, .5, {
                opacity: 1,
                x: 0,
                y: -140,
                scale: 1
            }, "slide3").to(a.selectors.appIconMsg, .5, {
                x: 0,
                y: 200
            }, "slide3").to(a.selectors.paper3, .5, {
                opacity: 1,
                x: 0,
                y: -120
            }, "slide3").to(a.selectors.appIconDbm, .5, {
                x: 90,
                y: 160,
                onComplete: function() {
                    3 !== b.timelines.index && b.timelines.main.pause(), b.timelines.steps.play(), b.timelines.checkrows.play();
                },
                onReverseComplete: function() {
                    b.timelines.steps.reverse(), b.timelines.checkrows.reverse();
                }
            }, "slide3").to(a.selectors.paper2, .5, {
                opacity: 1,
                x: 0,
                y: -400,
                scale: 2.5
            }, "slide4").to(a.selectors.spyglass, .5, {
                opacity: 0
            }, "slide4").to(a.selectors.paper1, .5, {
                opacity: 0,
                x: 0,
                y: -160
            }, "slide4").to(a.selectors.appIconMap, .5, {
                opacity: 0,
                x: -90,
                y: 100
            }, "slide4").to(a.selectors.appIconMsg, .5, {
                opacity: 0,
                x: 0,
                y: 50
            }, "slide4").to(a.selectors.paper3, .5, {
                opacity: 0,
                x: 0,
                y: -120
            }, "slide4").to(a.selectors.appIconDbm, .5, {
                opacity: 0,
                x: 90,
                y: 0,
                onReverseComplete: function() {
                    3 !== b.timelines.index && b.timelines.main.pause(), b.timelines.steps.play(), b.timelines.checkrows.play(), 
                    b.timelines.paper.reverse();
                },
                onComplete: function() {
                    b.timelines.main.pause(), b.timelines.steps.reverse(), b.timelines.checkrows.reverse(), 
                    setTimeout(function() {
                        b.timelines.paper.play();
                    }, 500);
                }
            }, "slide4").pause()
        },
        init: function() {
            $("#fullpage").fullpage({
                hybrid: !0,
                responsiveWidth: 1025,
                onLeave: function(a, c, d) {
                    b.timelines.index = a, b.timelines.nextIndex = c, b.timelines.direction = d, b.header(a, c, d), 
                    b.paper(a, c, d);
                }
            });
        },
        header: function(a, c, d) {
            1 === a && b.timelines.header.play(), 2 === a && "up" === d && b.timelines.header.reverse();
        },
        paper: function(a, c, d) {
            (3 === c && "down" === d || 4 === c && "down" === d) && b.timelines.main.play(), 
            (4 === a && "up" === d || 3 === a && "up" === d) && b.timelines.main.reverse();
        }
    };
    return {
        init: b.init
    };
}();

!function() {
    document.querySelector("body").classList.contains("homepage") && $(window).width() >= 1024 && homepage.init();
}();