function doYouSee(a){var b=$(a).position().top,c=$(window).scrollTop();return b>c&&b<c+$(window).height()}function headerFade(){$("#homepage-header:not(:visible)")}$(document).ready(function(){var a={slide1:!1,slide2:!1,slide3:!1,slide4:!1};if($(window).on("scroll",function(){var b=$(window).scrollTop();$(window).height();b>100&&$("#homepage-header:not(:visible)")&&$("#homepage-header").addClass("affix affix-top").fadeTo(350,1),doYouSee($("#slide-2"))&&$("#slide-2 .contents").addClass("showtime").removeClass("ninjad"),doYouSee($("#slide-3"))&&0==a.slide3&&($("#slide-3 .contents").addClass("showtime").removeClass("ninjad"),$("#animate-logo-1").fadeTo(500,0),$("#spyglass-animate").fadeTo(1e3,1,function(){$(".app-icon#app-icon-msg").stop(!0,!0).animate({top:"320px",left:"60px",height:"100px",width:"100px",overflow:"hidden",backgroundSize:"100% 100%"},800),$(".app-icon#app-icon-map").stop(!0,!0).animate({top:"340px",left:"240px",height:"100px",width:"100px",overflow:"hidden",backgroundSize:"100% 100%"},800),$(".app-icon#app-icon-dbm").stop(!0,!0).animate({top:"360px",left:"430px",height:"100px",width:"100px",overflow:"hidden",backgroundSize:"100% 100%"},800),$("#step1icon, .text-step-1").stop(!0,!0).delay(800).animate({opacity:1},800),$("#step2icon, #arrow1, .text-step-2").stop(!0,!0).delay(1200).animate({opacity:1},800),$("#step3icon, #arrow2, .text-step-3").stop(!0,!0).delay(1600).animate({opacity:1},800),$(".paper#paper-1").stop(!0,!0).animate({top:"450px",opacity:1},800),$(".paper#paper-2").stop(!0,!0).animate({top:"470px",opacity:1},800),$(".paper#paper-3").stop(!0,!0).animate({top:"490px",opacity:1},800,"swing",function(){$(".paper .checkrow").each(function(a,b){setTimeout(function(){$(b).stop(!0,!0).animate({opacity:1,marginLeft:"0px"},400)},200+200*a)})})}),a.slide3=!0),doYouSee($("#slide-4"))&&0==a.slide4&&($("#slide-4 .contents").addClass("showtime").removeClass("ninjad"),$(".paper .checkrow").stop(!0,!0).animate({opacity:0},200,"swing",function(){$(".paper .checkrow").remove()}),$(".paper#paper-1, .paper#paper-3").stop(!0,!0).animate({opacity:0},400,"swing",function(){$(".paper#paper-1, .paper#paper-3").remove()}),$("#spyglass-animate").fadeTo(600,0),$(".paper#paper-2").stop(!0,!0).delay(200).animate({width:"400px",height:"485px",top:"120px",left:"150px"},800,"swing",function(){$(".paper#paper-2 .paper-contents").addClass("showtime").removeClass("ninjad")}),a.slide4=!0),doYouSee($(".carousel"))&&$(".alidade-container, .background").css({position:"absolute",top:"300vh",bottom:"0px","z-index":0})}),$(".quoter").click(function(a){a.preventDefault();var b=$(this).data("target");$(".quote").removeClass("show").addClass("hidden"),$(b).removeClass("hidden").addClass("show"),$(".quoter").removeClass("active"),$(this).addClass("active");var c=$(".quoter.active").offset(),d=c.left+$(".quoter.active").width()/2-$(".pointer ~ .point").width()/2-10;console.log(d),$(".pointer ~ .point").offset({left:d})}),$("#slide-sidebar").css({"min-height":$("#slide-content").outerHeight()+50}),$(".step ul li a").each(function(){$(this).height()>30&&$(this).addClass("taller")}),$('input[name="extra"]').length>0&&"no"==$('input[name="extra"]').val()&&$(".picks").addClass("hide"),$(".picker").click(function(a){a.preventDefault(),$(".picks, .13-buttons").addClass("hide"),$($(this).data("target")).removeClass("hide"),$('input[name="extra"]').val($(this).data("target"))}),$(".welcome").modal("show"),$("#register-from-modal").click(function(){$(".welcome").modal("hide")}),$(".choice").click(function(){$(".choice-text").hide();var a=$("#"+$(this).attr("id")+"-text");a.show("fast")}),$('textarea[name="answer"]').length>1&&$('textarea[name="answer"]').each(function(a){$(this).attr("name","answer["+a+"]")}),$('input[type="checkbox"]').length>0){var b=$("#extra-holder").val().split(";");for(i=0;i<b.length;i++)$('input[type="checkbox"]#r-'+b[i]).prop("checked",!0)}if($("#preselected").length>0){var b=$("#preselected").val().split(";");for($(".answer-wrapper").addClass("hide"),i=0;i<=b.length;i++){var c=b[i];1==c||4==c?$(".answer-1").removeClass("hide").addClass("show"):5==c||6==c?$(".answer-4").removeClass("hide").addClass("show"):2==c?$(".answer-2").removeClass("hide").addClass("show"):3==c&&$(".answer-3").removeClass("hide").addClass("show")}}$(".ajx.project-name").submit(function(a){a.preventDefault();var b=$(this),c={project:$(this).children("#project").val(),title:$(this).children().children("#title").val()};return $.getJSON($(this).attr("action"),c,function(a){"danger"===a.code?b.prepend(a.message):(b.parent("div").append("<h4>"+a.message+"</h4>"),b.remove())}),!1}),$(".saveAnswer").submit(function(a){a.preventDefault();var b={slide:null,answer:[]};b.slide=$(this).find("#slide").val(),$(".answer").length>0?$(".answer").each(function(a){b.answer[a]=$(this).val()}):b.answer=$(this).find("#answer").val(),$.post("/ajax/save_answer",b,function(a){if("success"===a.code)if($(".editPrevAnswer").modal("toggle"),"object"==typeof b.answer){var c="<ul>";b.answer.forEach(function(a){c=c+"<li>"+a+"</li>"}),c+="</ul>",$("#answerBox").html(c)}else $("#answerBox").html(b.answer);else $(".editAnswer .modal-body").prepend('<div class="alert alert-danger"><i class="fa fa-times"></i> '+a.message+"</div>")},"json")}),$("#slide-sidebar a").click(function(a){a.preventDefault();var b=$("form").serialize(),c=$(this).attr("href").split("/"),d={nextSlide:c[3],hash:c[4]},e="/project/slide/"+d.nextSlide+"/"+d.hash;$.post("/project/slide/"+d.nextSlide,b,function(a){window.location.href=e})}),$("#editProfile").click(function(a){a.preventDefault(),$("#editProfileForm alert").remove();var b=$("#editProfileForm").serialize();$.post("/ajax/edit_profile",b,function(a){if("success"==a.code){var b=$("#editProfileForm").parent();$("#editProfileForm").remove(),$(b).append('<div class="alert alert-success">'+a.message+" <strong>Applying new user credentials...</strong></div>"),setTimeout(function(){$("#user-forms").modal("hide")},1950),setTimeout(function(){location.reload()},2e3)}else $("#editProfile").before('<div class="alert alert-danger">'+a.message+"</div>")},"json")}),$("#login").click(function(a){a.preventDefault(),$("#loginForm alert").remove();var b=$("#loginForm").serialize();$.post("/ajax/login",b,function(a){if("success"==a.code){var b=$("#loginForm").parent();$("#loginForm").remove(),$(b).append('<div class="alert alert-success">'+a.message+"<strong>Reloading credentials...</strong></div>"),setTimeout(function(){$("#user-forms").modal("hide")},1950),setTimeout(function(){location.reload()},2e3)}else $("#login").before('<div class="alert alert-danger">'+a.message+"</div>")},"json")}),$(".ajx.tsa-tooltip").each(function(){var a=$(this).attr("href").split("/"),b=a[a.length-1],c=$(this).parent();$.getJSON("/ajax/getprojectslide",{project:$('input[name="current_project"]').val(),slide:b},function(a){"danger"==a.code?c.append("No data found."):c.append('<div class="tsa-tooltip-wrap"><p>'+a.answer+" "+a.choice+"</p><p><em>"+a.extra+"</em></p></div>")})}),$(".prev-slide-loader").click(function(a){a.preventDefault(),$(".prev-slide-loader").next().empty();var b=$(".prev-slide-loader").next();return $.getJSON("/ajax/getprojectslide",{project:$(this).data("project"),slide:$(this).data("slide")},function(a){"danger"==a.code?b.append("No data found."):b.append('<div class="tsa-tooltip-wrap"><p>'+a.answer+" "+a.choice+"</p><p><em>"+a.extra+"</em></p></div>")}),!1}),$("#extra15-2").click(function(){$(this).is(":checked")?$(".checkboxcheck").show():$(".checkboxcheck").hide()}),$("#save-form").click(function(a){var b=$($(this).data("form")),c={title:b.children().children("#title").val(),description:$(".textarea").summernote("code"),step:b.children("#step").val(),position:b.children("#position").val()};return $.post("/ajax/save_slide",c,function(a){b.prepend('<div class="alert alert-'+a.code+'"><i class="fa fa-'+a.icon+'"></i> '+a.message+"</div>")},"json"),a.preventDefault(),!1}),$("#save-page-form").click(function(a){var b=$($(this).data("form")),c={title:b.children().children("#title").val(),contents:$(".textarea").summernote("code"),url:b.children().children("#url").val(),id:b.find("#page").val()};return $.post("/ajax/save_page",c,function(a){b.prepend('<div class="alert alert-'+a.code+'"><i class="fa fa-'+a.icon+'"></i> '+a.message+"</div>")},"json"),a.preventDefault(),!1}),$(".textarea").length>0&&$(".textarea").summernote(),$(".toc").affix({offset:{top:100,bottom:function(){return this.bottom=$("footer").outerHeight(!0)}}}),$('[data-toggle="tooltip"]').tooltip()});